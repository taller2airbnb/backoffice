(this["webpackJsonptaller2airbnb-backoffice"]=this["webpackJsonptaller2airbnb-backoffice"]||[]).push([[0],{116:function(e,t,a){e.exports=a(130)},121:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),o=a.n(i),s=(a(121),a(7)),c=a(6),l=a(9),u=a(8),m=a(67),p=a(17),h=function(){function e(t){Object(s.a)(this,e),this._jsonResponse=t}return Object(c.a)(e,null,[{key:"understandThis",value:function(e){throw new Error("You have to implement the method")}}]),Object(c.a)(e,[{key:"hasError",value:function(){return void 0!==this._jsonResponse.error&&!1!==this._jsonResponse.error}},{key:"errors",value:function(){var e;return null!==(e=this._jsonResponse.Error)&&void 0!==e?e:this._jsonResponse.error}},{key:"content",value:function(){return this._jsonResponse}}]),e}(),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"errorMessages",value:function(){return this.errors()}},{key:"description",value:function(){return"\xa1Ha ocurrido un error!"}},{key:"message",value:function(){return this.errorMessages()}}],[{key:"defaultResponse",value:function(){throw new Error("You have to implement the method")}},{key:"errorCodes",value:function(){throw new Error("You have to implement the method")}},{key:"understandThis",value:function(e){return void 0!==e.error||void 0!==e.Error}}]),a}(h),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"defaultResponse",value:function(){throw new Error("You have to implement the method")}},{key:"understandThis",value:function(e){return void 0===e.error&&void 0===e.Error}}]),a}(h),v=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"generalResponses",value:function(){return[f]}},{key:"ownResponses",value:function(){return[]}},{key:"responses",value:function(){return this.ownResponses().concat(this.generalResponses())}},{key:"url",value:function(){return this.constructor.url()}},{key:"contentType",value:function(){return"application/json"}},{key:"method",value:function(){throw new Error("You have to implement the method")}},{key:"needsAuthorization",value:function(){throw new Error("You have to implement the method")}}],[{key:"url",value:function(){throw new Error("You have to implement the method")}}]),e}(),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"userPersonalData",value:function(){var e=this.content().data;return{id:e.id,email:e.email,firstName:e.first_name,lastName:e.last_name,avatarUrl:e.avatar}}}],[{key:"defaultResponse",value:function(){return{data:{id:2,email:"maria@gonzalez.com",first_name:"Maria",last_name:"Gonzalez",avatar:"https://s3.amazonaws.com/uifaces/faces/twitter/josephstein/128.jpg"},ad:{company:"Google",url:"http://statuscode.org/",text:"A weekly newsletter focusing on software development, infrastructure, the server, performance, and the stack end of things."}}}}]),a}(f),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"ownResponses",value:function(){return[b]}},{key:"method",value:function(){return"GET"}},{key:"needsAuthorization",value:function(){return!1}}],[{key:"url",value:function(){return"/users/2"}}]),a}(v),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"defaultResponse",value:function(){return{token:"QpwL5tke4Pnpja7X4"}}}]),a}(f),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"defaultResponse",value:function(){return{error:"Missing password"}}},{key:"errorCodes",value:function(){return["user not found","Missing email or username","Missing password"]}}]),a}(d),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"ownResponses",value:function(){return[y,E]}},{key:"method",value:function(){return"POST"}},{key:"needsAuthorization",value:function(){return!1}}],[{key:"url",value:function(){return"/login"}}]),a}(v),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"defaultResponse",value:function(){return{message:"Account successfully created"}}}]),a}(f),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"ownResponses",value:function(){return[j]}},{key:"method",value:function(){return"POST"}},{key:"needsAuthorization",value:function(){return!1}}],[{key:"url",value:function(){return"/register/"}}]),a}(v),w=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};Object(s.a)(this,e),this._requester=t,this._handleServerError=a,this._handleResponse=this._handleResponse.bind(this)}return Object(c.a)(e,[{key:"_handleResponse",value:function(e,t){return 500===e.status?(console.log("Server error: ",e),this._handleServerError(e)):t(e)}},{key:"login",value:function(e,t){var a=this;return this._requester.call({endpoint:new k,onResponse:function(e){return a._handleResponse(e,t)},data:e})}},{key:"register",value:function(e,t){var a=this;return this._requester.call({endpoint:new O,onResponse:function(e){return a._handleResponse(e,t)},data:e})}},{key:"getProfile",value:function(e){var t=this;return this._requester.call({endpoint:new g,onResponse:function(a){return t._handleResponse(a,e)}})}}]),e}();function _(e){var t="REACT_APP_"+e;return Object({NODE_ENV:"production",PUBLIC_URL:"/backoffice",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://taller2airbnb-businesscore.herokuapp.com"})[t]}var x=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"call",value:function(e){e.endpoint,e.onResponse,e.data;throw new Error("You have to implement the method")}}]),e}(),S=a(28),C=function(){var e;return e={},Object(S.a)(e,g.name,b),Object(S.a)(e,k.name,y),Object(S.a)(e,O.name,j),e},T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this))._expectedResponses=e||C(),n}return Object(c.a)(a,[{key:"call",value:function(e){var t=e.endpoint,a=e.onResponse,n=(e.data,this._expectedResponses[t.constructor.name]),r=n.defaultResponse(),i=new n(r);setTimeout((function(){return a(i)}),2500)}}]),a}(x),R=a(93),D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this))._baseUrl=e,n}return Object(c.a)(a,[{key:"call",value:function(e){var t=this,a=e.endpoint,n=e.onResponse,r=e.data,i=void 0===r?void 0:r,o=this._buildRequest(a,i),s=a.url();return"GET"===a.method()&&i&&(s+="?"+this._dataToQueryString(i)),fetch(this._baseUrl+s,o).then((function(e){return e.json()})).then((function(e){return n(t._buildResponse(e,a))})).catch((function(e){console.log("Exception in API request: ",e)}))}},{key:"_buildRequest",value:function(e,t){var a=this._buildHeadersFor(e),n={method:e.method(),headers:a};if("GET"!==e.method()){var r=this._encoderFor(e.contentType());Object.assign(a,r.headers()),Object.assign(n,{body:r.encode(t)})}return n}},{key:"_buildResponse",value:function(e,t){var a,n,r=t.responses(),i=Object(R.a)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.understandThis(e)){a=new o(e);break}a=new d(e)}}catch(s){i.e(s)}finally{i.f()}return a}},{key:"_buildHeadersFor",value:function(e){var t={};return e.contentType()&&"multipart/form-data"!==e.contentType()&&(t["Content-Type"]=e.contentType()),t}},{key:"_dataToQueryString",value:function(e){for(var t=[],a=0;a<Object.keys(e).length;a+=1){var n=Object.keys(e)[a],r=Object.values(e)[a];r&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r)))}return t.join("&")}},{key:"_encoderFor",value:function(e){return[new P,new A].find((function(t){return t.accepts(e)}))}}]),a}(x),I=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"accepts",value:function(e){throw new Error("You have to implement the method")}},{key:"headers",value:function(){throw new Error("You have to implement the method")}},{key:"encode",value:function(e){throw new Error("You have to implement the method")}}]),e}(),A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"accepts",value:function(e){return"multipart/form-data"===e}},{key:"headers",value:function(){return{}}},{key:"encode",value:function(e){var t=new FormData;for(var a in e){var n=e[a];void 0!==n&&t.append(a,n)}return t}},{key:"_generateBodyFromFiles",value:function(e){var t=new FormData;return Object.keys(e).forEach((function(a){var n=e[a];t.append(a,n)})),t}}]),a}(I),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"accepts",value:function(e){return"application/json"===e}},{key:"headers",value:function(){return{"Content-Type":"application/json"}}},{key:"encode",value:function(e){return JSON.stringify(e)}}]),a}(I),U=D,N=new(function(){function e(){Object(s.a)(this,e),this._apiClient=void 0}return Object(c.a)(e,[{key:"apiClient",value:function(){return void 0===this._apiClient&&this._setUpApiClient(),this._apiClient}},{key:"routes",value:function(){return{login:"/",home:"/home",profile:"/profile",transactions:"/transactions",healthcheck:"/healthcheck",other:"/other",userlist:"/userlist",postings:"/postings",servers:"/servers",covid:"/covid"}}},{key:"loginUser",value:function(e){localStorage.setItem("token",e)}},{key:"thereIsLoggedInUser",value:function(){return localStorage.getItem("token")}},{key:"_setUpApiClient",value:function(){var e=this._setUpRequester();this._apiClient=new w(e)}},{key:"_setUpRequester",value:function(){if(_("USING_FAKE_API"))return new T;var e=_("API_URL");return new U(e)}}]),e}()),B=(a(92),a(46),a(98)),M=a(43),W=a(97),L=a(194),F=a(5),z=a(195),q=a(210),J=a(58),H=a(193),G=a(78),K=a(3),Y=a(189),V=a(211),Q=a(185),X=a(186),$=a(187),Z=a(188),ee=a(95),te=a.n(ee),ae=a(94),ne=a.n(ae),re=a(178),ie=a(181),oe=a(182),se=a(183),ce=a(184),le=[{id:"Users",children:[{id:"Create User",icon:r.a.createElement(re.a,null),route:"home"},{id:"User List",icon:r.a.createElement(re.a,null),route:"userlist"},{id:"Transactions",icon:r.a.createElement(ie.a,null),route:"transactions"}]},{id:"Postings",children:[{id:"Postings",icon:r.a.createElement(oe.a,null),route:"postings"}]},{id:"Servers",children:[{id:"Servers",icon:r.a.createElement(se.a,null),route:"servers"}]},{id:"Covid Warn",children:[{id:"Covid Settings",icon:r.a.createElement(ce.a,null),route:"covid"}]},{id:"Quality",children:[{id:"Analytics",icon:r.a.createElement(ne.a,null),route:"other"}]}];var ue=Object(p.f)(Object(F.a)((function(e){return{categoryHeader:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},categoryHeaderPrimary:{color:e.palette.common.white},item:{paddingTop:1,paddingBottom:1,color:"rgba(255, 255, 255, 0.7)","&:hover,&:focus":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},itemCategory:{backgroundColor:"#232f3e",boxShadow:"0 -1px 0 #404854 inset",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},firebase:{fontSize:24,color:e.palette.common.white},itemActiveItem:{color:"#4fc3f7"},itemPrimary:{fontSize:"inherit"},itemIcon:{minWidth:"auto",marginRight:e.spacing(2)},divider:{marginTop:e.spacing(2)}}}))((function(e){var t=e.classes,a=e.selectedRoute,n=e.history,i=Object(G.a)(e,["classes","selectedRoute","history"]);return r.a.createElement(V.a,Object.assign({variant:"permanent"},i),r.a.createElement(Q.a,{disablePadding:!0},r.a.createElement(X.a,{className:Object(K.a)(t.firebase,t.item,t.itemCategory)},"BookBnB"),r.a.createElement(X.a,{className:Object(K.a)(t.item,t.itemCategory)},r.a.createElement($.a,{className:t.itemIcon},r.a.createElement(te.a,null)),r.a.createElement(Z.a,{classes:{primary:t.itemPrimary}},"Project Overview")),le.map((function(e){var i=e.id,o=e.children;return r.a.createElement(r.a.Fragment,{key:i},r.a.createElement(X.a,{className:t.categoryHeader},r.a.createElement(Z.a,{classes:{primary:t.categoryHeaderPrimary}},i)),o.map((function(e){var i=e.id,o=e.icon,s=e.route;return r.a.createElement(X.a,{key:i,button:!0,className:Object(K.a)(t.item,s===a&&t.itemActiveItem),onClick:function(){return n.push("/"+s)}},r.a.createElement($.a,{className:t.itemIcon},o),r.a.createElement(Z.a,{classes:{primary:t.itemPrimary}},i))})),r.a.createElement(Y.a,{className:t.divider}))}))))}))),me=a(190),pe=a(192),he=a(191);var de=Object(F.a)((function(e){return{secondaryBar:{zIndex:0},menuButton:{marginLeft:-e.spacing(1)},iconButtonAvatar:{padding:4},link:{textDecoration:"none",color:"rgba(255, 255, 255, 0.7)","&:hover":{color:e.palette.common.white}},button:{borderColor:"rgba(255, 255, 255, 0.7)"}}}))((function(e){var t=e.classes,a=(e.onDrawerToggle,e.header);return r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{component:"div",className:t.secondaryBar,color:"primary",position:"static",elevation:0},r.a.createElement(he.a,null,r.a.createElement(pe.a,{container:!0,alignItems:"center",spacing:1},r.a.createElement(pe.a,{item:!0,xs:!0},r.a.createElement(J.a,{color:"inherit",variant:"h5",component:"h1"},a))))))}));function fe(){return r.a.createElement(J.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(H.a,{color:"inherit",href:"https://material-ui.com/"},"BookBnB")," ",(new Date).getFullYear(),".")}var ve=Object(W.a)({palette:{primary:{light:"#63ccff",main:"#009be5",dark:"#006db3"}},typography:{h5:{fontWeight:500,fontSize:26,letterSpacing:.5}},shape:{borderRadius:8},props:{MuiTab:{disableRipple:!0}},mixins:{toolbar:{minHeight:48}}});ve=Object(M.a)(Object(M.a)({},ve),{},{overrides:{MuiDrawer:{paper:{backgroundColor:"#18202c"}},MuiButton:{label:{textTransform:"none"},contained:{boxShadow:"none","&:active":{boxShadow:"none"}}},MuiTabs:{root:{marginLeft:ve.spacing(1)},indicator:{height:3,borderTopLeftRadius:3,borderTopRightRadius:3,backgroundColor:ve.palette.common.white}},MuiTab:{root:Object(S.a)({textTransform:"none",margin:"0 16px",minWidth:0,padding:0},ve.breakpoints.up("md"),{padding:0,minWidth:0})},MuiIconButton:{root:{padding:ve.spacing(1)}},MuiTooltip:{tooltip:{borderRadius:4}},MuiDivider:{root:{backgroundColor:"#404854"}},MuiListItemText:{primary:{fontWeight:ve.typography.fontWeightMedium}},MuiListItemIcon:{root:{color:"inherit",marginRight:0,"& svg":{fontSize:20}}},MuiAvatar:{root:{width:32,height:32}}}});var be={root:{display:"flex",minHeight:"100vh"},drawer:Object(S.a)({},ve.breakpoints.up("sm"),{width:256,flexShrink:0}),app:{flex:1,display:"flex",flexDirection:"column"},main:{flex:1,padding:ve.spacing(6,4),background:"#eaeff1"},footer:{padding:ve.spacing(2),background:"#eaeff1"}};var ge=Object(F.a)(be)((function(e){var t=e.classes,a=e.selectedRoute,n=e.header,i=r.a.useState(!1),o=Object(B.a)(i,2),s=o[0],c=o[1],l=function(){c(!s)};return r.a.createElement(L.a,{theme:ve},r.a.createElement("div",{className:t.root},r.a.createElement(z.a,null),r.a.createElement("nav",{className:t.drawer},r.a.createElement(q.a,{smUp:!0,implementation:"js"},r.a.createElement(ue,{PaperProps:{style:{width:256}},variant:"temporary",open:s,onClose:l,selectedRoute:a})),r.a.createElement(q.a,{xsDown:!0,implementation:"css"},r.a.createElement(ue,{selectedRoute:a,PaperProps:{style:{width:256}}}))),r.a.createElement("div",{className:t.app},r.a.createElement(de,{onDrawerToggle:l,header:n}),r.a.createElement("main",{className:t.main},e.children),r.a.createElement("footer",{className:t.footer},r.a.createElement(fe,null)))))})),ye=a(20),Ee=a(198),ke=a(207),je=a(196),Oe=a(197),we=Object(je.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function _e(e){var t=we(),a=function(t){e.handleInputChange(t)};return r.a.createElement(Oe.a,{component:"main",maxWidth:"xs"},r.a.createElement(z.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(J.a,{component:"h1",variant:"h5"},"User Creation Form"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(pe.a,{container:!0,spacing:2},r.a.createElement(pe.a,{item:!0,xs:12,sm:6},r.a.createElement(ke.a,{autoComplete:"fname",name:"first_name",variant:"outlined",required:!0,fullWidth:!0,id:"first_name",label:"First Name",autoFocus:!0,onChange:function(e){return a(e)}})),r.a.createElement(pe.a,{item:!0,xs:12,sm:6},r.a.createElement(ke.a,{variant:"outlined",required:!0,fullWidth:!0,id:"last_name",label:"Last Name",name:"last_name",autoComplete:"lname",onChange:function(e){return a(e)}})),r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(ke.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:function(e){return a(e)}})),r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(ke.a,{variant:"outlined",required:!0,fullWidth:!0,id:"alias",label:"User Name",name:"alias",autoComplete:"alias",onChange:function(e){return a(e)}})),r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(ke.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return a(e)}})),r.a.createElement(pe.a,{item:!0,xs:12,sm:5},r.a.createElement(ke.a,{variant:"outlined",required:!0,fullWidth:!0,name:"national_id_type",label:"Document Type",type:"national_id_type",id:"national_id_type",onChange:function(e){return a(e)}})),r.a.createElement(pe.a,{item:!0,xs:12,sm:7},r.a.createElement(ke.a,{variant:"outlined",required:!0,fullWidth:!0,name:"national_id",label:"Document Number",type:"national_id",id:"national_id",onChange:function(e){return a(e)}}))),e.errorMessage&&r.a.createElement(J.a,{component:"h1",variant:"h5",style:{color:"red"}},e.errorMessage),r.a.createElement(Ee.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){e.handleSubmit()}},"Create User"))))}var xe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={formData:{email:"",password:"",first_name:"",last_name:"",national_id_type:"",national_id:"",alias:"",profile:0},errorMessage:""},n.handleInputChange=n.handleInputChange.bind(Object(ye.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(ye.a)(n)),n.handleApiResponse=n.handleApiResponse.bind(Object(ye.a)(n)),n}return Object(c.a)(a,[{key:"initializeForm",value:function(){this.setState({formData:{email:"",password:"",first_name:"",last_name:"",national_id_type:"",national_id:"",alias:"",profile:0}})}},{key:"handleInputChange",value:function(e){var t=e.target,a=this.state.formData;a[t.name]=t.value,this.setState({formData:a})}},{key:"handleApiResponse",value:function(e){e.hasError()?this.setState({errorMessage:e.errorMessages()}):alert("User Created Successfully")}},{key:"handleSubmit",value:function(){N.apiClient().register(this.state.formData,this.handleApiResponse)}},{key:"render",value:function(){return r.a.createElement(_e,{handleSubmit:this.handleSubmit,handleInputChange:this.handleInputChange,errorMessage:this.state.errorMessage})}}]),a}(r.a.Component),Se=Object(F.a)((function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"40px 16px"}}}))(xe),Ce=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(ge,{selectedRoute:"home",header:"User Management"},r.a.createElement(Se,null))}}]),a}(n.Component),Te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(ge,{selectedRoute:"other"},r.a.createElement("div",null,"Coming soon..."))}}]),a}(n.Component),Re=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return console.log("renderizando"),r.a.createElement("p",null,"Nombre de pepe: ",this.props.nombre)}}]),a}(n.Component),De=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={userData:{}},n.handleApiResponse=n.handleApiResponse.bind(Object(ye.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Perfil del usuario"),r.a.createElement("p",null,"Email: ",this.state.userData.email),r.a.createElement("p",null,"Nombre: ",this.state.userData.firstName),r.a.createElement("p",null,"Apellido: ",this.state.userData.lastName),r.a.createElement(Re,{key:"pepe",nombre:"pepe"}))}},{key:"handleApiResponse",value:function(e){this.setState({userData:e.userPersonalData()})}},{key:"getUserData",value:function(){N.apiClient().getProfile(this.handleApiResponse)}}]),a}(n.Component),Ie=a(10),Ae=a.n(Ie),Pe=a(14),Ue=a(202),Ne=a(204),Be=a(200),Me=a(201),We=a(203),Le=a(199),Fe=a(132);function ze(e,t,a,n){var r={method:e,headers:t};return n&&(r.headers=Object(M.a)(Object(M.a)({},t),{},{Authorization:n})),a&&(r=Object(M.a)(Object(M.a)({},r),{},{body:JSON.stringify(a)})),r}function qe(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(Pe.a)(Ae.a.mark((function e(t,a){var n,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ze("GET",{"Content-Type":"application/json"},"",a),e.next=4,fetch(t,n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(Pe.a)(Ae.a.mark((function e(t){var a,n,r,i,o=arguments;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"",n=o.length>2?o[2]:void 0,r=ze("PUT",{"Content-Type":"application/json"},a,n),e.next=6,fetch(t,r);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(Pe.a)(Ae.a.mark((function e(t,a){var n,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ze("GET",{"Content-Type":"application/json",Token:a},""),e.next=4,fetch(t,n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(Pe.a)(Ae.a.mark((function e(t){var a,n,r,i,o=arguments;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"",n=o.length>2?o[2]:void 0,r=ze("PUT",{"Content-Type":"application/json",Token:n},a),e.next=6,fetch(t,r);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return $e.apply(this,arguments)}function $e(){return($e=Object(Pe.a)(Ae.a.mark((function e(t){var a,n,r,i,o=arguments;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"",n=o.length>2?o[2]:void 0,r=ze("POST",{"Content-Type":"application/json",Token:n},a),e.next=6,fetch(t,r);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ze="https://taller2airbnb-businesscore.herokuapp.com/user",et="http://taller2airbnb-covidwarn.herokuapp.com/params/",tt="https://taller2airbnb-profile.herokuapp.com/apikey/",at=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!0,status:null,transactions:[],errorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadTransactions();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTransactions",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){var t,a,n,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),"http://taller2airbnb-businesscore.herokuapp.com/transactions",e.next=4,qe("http://taller2airbnb-businesscore.herokuapp.com/transactions",t);case 4:if(a=e.sent,this.setState({status:a.status,loading:!1}),200!=a.status){e.next=13;break}return e.next=9,a.json();case 9:n=e.sent,(r=n.message).sort((function(e,t){return e.creation_date>t.creation_date?1:-1})),this.setState({transactions:r});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"listATransaction",value:function(e){return r.a.createElement(Le.a,{key:e.name},r.a.createElement(Be.a,{align:"left",style:{fontWeight:"bold"}},e.name_posting),r.a.createElement(Be.a,{align:"center"},e.first_name_booker," ",e.last_name_booker),r.a.createElement(Be.a,{align:"center"},e.first_name_owner," ",e.last_name_owner),r.a.createElement(Be.a,{align:"left"},e.operation),r.a.createElement(Be.a,{align:"center"},e.payment),r.a.createElement(Be.a,{align:"center"},this.formatDateAndTime(e.creation_date)))}},{key:"formatDateAndTime",value:function(e){var t=this.splitDate(e);return t.day+"/"+t.month+"/"+t.year+" - "+t.time}},{key:"splitDate",value:function(e){var t={};return t.year=e.substring(0,4),t.month=e.substring(5,7),t.day=e.substring(8,10),t.time=e.substring(11,19),t}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",null,"Loading..."):this.state.transactions.length>0?r.a.createElement(Me.a,{component:Fe.a},r.a.createElement(Ue.a,{size:"small","aria-label":"a dense table"},r.a.createElement(We.a,null,r.a.createElement(Le.a,null,r.a.createElement(Be.a,{align:"center"},"Posting Name"),r.a.createElement(Be.a,{align:"center"},"Booker"),r.a.createElement(Be.a,{align:"center"},"Owner"),r.a.createElement(Be.a,{align:"center"},"Operation"),r.a.createElement(Be.a,{align:"center"},"Amount"),r.a.createElement(Be.a,{align:"center"},"Date"))),r.a.createElement(Ne.a,null,this.state.transactions.map(this.listATransaction,this)))):r.a.createElement("div",null,r.a.createElement("div",null,"Status: ",this.state.status))}}]),a}(r.a.Component),nt=Object(F.a)((function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"40px 16px"}}}))(at),rt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(ge,{selectedRoute:"transactions",header:"Transaction List"},r.a.createElement(nt,null))}}]),a}(n.Component),it=a(212),ot=a(208),st=a(96),ct=a.n(st);function lt(){return r.a.createElement(J.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(H.a,{color:"inherit",href:"https://material-ui.com/"},"BookBnB")," ",(new Date).getFullYear(),".")}var ut=Object(je.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function mt(e){var t=ut(),a=function(t){e.handleInputChange(t)};return r.a.createElement(Oe.a,{component:"main",maxWidth:"xs"},r.a.createElement(z.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(it.a,{className:t.avatar},r.a.createElement(ct.a,null)),r.a.createElement(J.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(ke.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:a,autoFocus:!0}),r.a.createElement(ke.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return a(e)}}),e.errorMessage&&r.a.createElement(J.a,{component:"h1",variant:"h5",style:{color:"red"}},e.errorMessage),r.a.createElement(Ee.a,{fullWidth:!0,type:"button",variant:"contained",color:"primary",className:t.submit,onClick:function(){e.handleSubmit()}},"Sign In"),r.a.createElement(pe.a,{container:!0},r.a.createElement(pe.a,{item:!0},r.a.createElement(H.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(ot.a,{mt:8},r.a.createElement(lt,null)))}var pt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={formData:{email:"",password:"",google_token:"",user_type:"admin"},errorMessage:""},n.handleInputChange=n.handleInputChange.bind(Object(ye.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(ye.a)(n)),n.handleApiResponse=n.handleApiResponse.bind(Object(ye.a)(n)),n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(mt,{handleSubmit:this.handleSubmit,handleInputChange:this.handleInputChange,errorMessage:this.state.errorMessage})}},{key:"handleInputChange",value:function(e){var t=e.target,a=this.state.formData;a[t.name]=t.value,this.setState({formData:a})}},{key:"handleApiResponse",value:function(e){e.hasError()?this.setState({errorMessage:e.errorMessages()}):(N.loginUser(e.content().token),this.props.history.push(N.routes().home))}},{key:"handleSubmit",value:function(){N.apiClient().login(this.state.formData,this.handleApiResponse)}}]),a}(n.Component),ht=a(205),dt=a(206),ft=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!0,status:null,name:"",user_list:[],errorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.reloadUserList();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadUserList",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){var t,a,n;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),Ze,e.next=4,qe("https://taller2airbnb-businesscore.herokuapp.com/user",t);case 4:if(a=e.sent,this.setState({status:a.status,loading:!1}),200!=a.status){e.next=13;break}return e.next=9,a.json();case 9:n=e.sent,n.message.users.sort((function(e,t){return e.id>t.id?1:-1})),this.setState({user_list:n.message.users});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"listAUser",value:function(e){var t=this,a="Block",n=r.a.createElement(ht.a,null),i="secondary";return e.blocked&&(a="Unblock",n=r.a.createElement(dt.a,null),i="primary"),r.a.createElement(Le.a,{key:e.name},r.a.createElement(Be.a,{align:"left",style:{fontWeight:"bold"}},e.first_name," ",e.last_name),r.a.createElement(Be.a,{align:"left"},e.alias),r.a.createElement(Be.a,{align:"left"},e.email),r.a.createElement(Be.a,{align:"left"},e.national_id_type," ",e.national_id),r.a.createElement(Be.a,{align:"center"},e.id),r.a.createElement(Be.a,{align:"center"},n),r.a.createElement(Be.a,{align:"center"},r.a.createElement(Ee.a,{style:{marginLeft:"2rem",marginBottom:"1.2rem"},type:"button",variant:"contained",color:i,onClick:function(){return t.setBlockStatus(e.id,!e.blocked)}},a)))}},{key:"setBlockStatus",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(t,a){var n,r,i;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),r={new_status:a},i=Ze+"/"+t+"/blocked_status",e.next=5,He(i,r,n);case 5:e.sent,this.setState({loading:!0}),this.reloadUserList();case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",null,"Loading..."):this.state.user_list.length>0?r.a.createElement(Me.a,{component:Fe.a},r.a.createElement(Ue.a,{size:"small","aria-label":"a dense table"},r.a.createElement(We.a,null,r.a.createElement(Le.a,null,r.a.createElement(Be.a,{align:"center"},"Name"),r.a.createElement(Be.a,{align:"center"},"Alias"),r.a.createElement(Be.a,{align:"center"},"Mail"),r.a.createElement(Be.a,{align:"center"},"Id"),r.a.createElement(Be.a,{align:"center"},"Key"),r.a.createElement(Be.a,{align:"center"},"Blocked?"),r.a.createElement(Be.a,{align:"center"}))),r.a.createElement(Ne.a,null,this.state.user_list.map(this.listAUser,this)))):r.a.createElement("div",null,r.a.createElement("div",null,"Status: ",this.state.status),r.a.createElement("div",null,this.state.name),r.a.createElement("div",null,localStorage.getItem("token")))}}]),a}(r.a.Component),vt=Object(F.a)((function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"40px 16px"}}}))(ft),bt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(ge,{selectedRoute:"home",header:"User List"},r.a.createElement(vt,null))}}]),a}(n.Component),gt=(a(129),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getStatus=function(){fetch(n.props.healthTestUrl).then((function(e){return e.json()})).then((function(e){return n.setState({status:e.status,loading:!1})}))},n.state={loading:!0,status:""},n.getStatus.bind(Object(ye.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getStatus(),setInterval(this.getStatus,15e3);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.loading&&r.a.createElement("p",null,"Checking server status for ",this.props.serverName),!this.state.loading&&r.a.createElement("p",null,this.props.serverName," status: ",this.state.status))}}]),a}(r.a.Component)),yt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(gt,{serverName:"Profile Server",healthTestUrl:"https://taller2airbnb-profile.herokuapp.com/health"}),r.a.createElement(gt,{serverName:"Business Core",healthTestUrl:"https://taller2airbnb-businesscore.herokuapp.com/health"})))}}]),a}(r.a.Component),Et=function(e){var t=e.component,a=Object(G.a)(e,["component"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return N.thereIsLoggedInUser()?r.a.createElement(t,e):r.a.createElement(p.a,{to:{pathname:N.routes().login}})}}))},kt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!0,status:null,name:"",postings_list:[],user_list:[],errorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.reloadPostingsList(),this.reloadUserList();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadPostingsList",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){var t,a,n,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),"https://taller2airbnb-businesscore.herokuapp.com/posting/admin",e.next=4,qe("https://taller2airbnb-businesscore.herokuapp.com/posting/admin",t);case 4:if(a=e.sent,this.setState({status:a.status,loading:!1}),200!=a.status){e.next=13;break}return e.next=9,a.json();case 9:n=e.sent,(r=n.message).sort((function(e,t){return e.id_posting>t.id_posting?1:-1})),this.setState({postings_list:r});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadUserList",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){var t,a,n;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),Ze,e.next=4,qe("https://taller2airbnb-businesscore.herokuapp.com/user",t);case 4:if(a=e.sent,this.setState({status:a.status,loading:!1}),200!=a.status){e.next=13;break}return e.next=9,a.json();case 9:n=e.sent,n.message.users.sort((function(e,t){return e.id>t.id?1:-1})),this.setState({user_list:n.message.users});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postingDisplay",value:function(e){var t=this,a="Block",n=r.a.createElement(ht.a,null),i="secondary";e.blocked&&(a="Unblock",n=r.a.createElement(dt.a,null),i="primary");var o=r.a.createElement(ht.a,null);e.public&&(o=r.a.createElement(dt.a,null));e.deleted;var s="Not specified.";return e.location&&(s="("+e.location.x+","+e.location.y+")"),r.a.createElement(Le.a,{key:e.name},r.a.createElement(Be.a,{align:"left",style:{fontWeight:"bold"}},e.name),r.a.createElement(Be.a,{align:"left"},e.content),r.a.createElement(Be.a,{align:"left"},this.getUserName(e.id_user)),r.a.createElement(Be.a,{align:"left"},this.formatDateAndTime(e.creation_date)),r.a.createElement(Be.a,{align:"left"},this.formatDate(e.start_date)," ~ ",this.formatDate(e.end_date)),r.a.createElement(Be.a,{align:"left"},e.city,", ",e.country),r.a.createElement(Be.a,{align:"left"},s),r.a.createElement(Be.a,{align:"center"},e.max_number_guests),r.a.createElement(Be.a,{align:"center"},e.price_day),r.a.createElement(Be.a,{align:"center"},o),r.a.createElement(Be.a,{align:"center"},n),r.a.createElement(Be.a,{align:"center"},r.a.createElement(Ee.a,{type:"button",variant:"contained",color:i,onClick:function(){return t.setBlockState(e.id_posting,!e.blocked)}},a)))}},{key:"getUserName",value:function(e){var t=this.state.user_list.filter((function(t){return t.id==e}));if(t.length>0){var a=t[0];return a.first_name+" "+a.last_name}return"unknown"}},{key:"splitDate",value:function(e){var t={};return t.year=e.substring(0,4),t.month=e.substring(5,7),t.day=e.substring(8,10),t.time=e.substring(11,19),t}},{key:"formatDate",value:function(e){var t=this.splitDate(e);return t.day+"/"+t.month+"/"+t.year}},{key:"formatDateAndTime",value:function(e){var t=this.splitDate(e);return t.day+"/"+t.month+"/"+t.year+" - "+t.time}},{key:"setBlockState",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(t,a){var n,r,i;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),r={blocked:a},i="https://taller2airbnb-businesscore.herokuapp.com/posting/blocked_status/"+t,e.next=5,He(i,r,n);case 5:e.sent,this.setState({loading:!0}),this.reloadPostingsList();case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",null,"Loading..."):this.state.postings_list.length>0?r.a.createElement(Me.a,{component:Fe.a},r.a.createElement(Ue.a,{size:"small","aria-label":"a dense table"},r.a.createElement(We.a,null,r.a.createElement(Le.a,null,r.a.createElement(Be.a,{align:"center"},"Name"),r.a.createElement(Be.a,{align:"center"},"Content"),r.a.createElement(Be.a,{align:"center"},"Owner"),r.a.createElement(Be.a,{align:"center"},"Creation"),r.a.createElement(Be.a,{align:"center"},"Duration"),r.a.createElement(Be.a,{align:"center"},"Location"),r.a.createElement(Be.a,{align:"center"},"Coordinates"),r.a.createElement(Be.a,{align:"center"},"Guests"),r.a.createElement(Be.a,{align:"center"},"PPD"),r.a.createElement(Be.a,{align:"center"},"Public?"),r.a.createElement(Be.a,{align:"center"},"Blocked?"),r.a.createElement(Be.a,{align:"center"}))),r.a.createElement(Ne.a,null,this.state.postings_list.map(this.postingDisplay,this)))):r.a.createElement("div",null,r.a.createElement("div",null,"Status: ",this.state.status),r.a.createElement("div",null,this.state.name),r.a.createElement("div",null,localStorage.getItem("token")))}}]),a}(r.a.Component),jt=Object(F.a)((function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"40px 16px"}}}))(kt),Ot=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(ge,{selectedRoute:"posting",header:"Postings"},r.a.createElement(jt,null))}}]),a}(n.Component),wt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!0,create:!0,status:null,name:"",api_keys:[],new_key_name:"",errorMessage:""},n.onInputchange=n.onInputchange.bind(Object(ye.a)(n)),n.onSubmitForm=n.onSubmitForm.bind(Object(ye.a)(n)),n}return Object(c.a)(a,[{key:"onSubmitForm",value:function(){this.addApiKey(this.state.new_key_name)}},{key:"onInputchange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.reloadApiKeys();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadApiKeys",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){var t,a,n;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"7objfFTJUoAcHoLGJ2VT2Q",tt,e.next=4,Ke("https://taller2airbnb-profile.herokuapp.com/apikey/","7objfFTJUoAcHoLGJ2VT2Q");case 4:if(t=e.sent,this.setState({status:t.status,loading:!1}),200!=t.status){e.next=13;break}return e.next=9,t.json();case 9:a=e.sent,(n=a.apikeys).sort((function(e,t){return e.id>t.id?1:-1})),this.setState({api_keys:n});case 13:this.setState({create:!0});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"apiKeysDisplay",value:function(e){var t=this,a="Block",n=r.a.createElement(dt.a,null),i="secondary";return e.active||(a="Unblock",n=r.a.createElement(ht.a,null),i="primary"),r.a.createElement(Le.a,{key:e.name_from},r.a.createElement(Be.a,{align:"left",style:{fontWeight:"bold"}},e.name_from),r.a.createElement(Be.a,{align:"center"},e.id),r.a.createElement(Be.a,{align:"center"},e.api_key_token),r.a.createElement(Be.a,{align:"center"},n),r.a.createElement(Be.a,{align:"center"},r.a.createElement(Ee.a,{type:"button",variant:"contained",color:i,onClick:function(){return t.setActiveState(e.id,!e.active)}},a)))}},{key:"setActiveState",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(t,a){var n,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"7objfFTJUoAcHoLGJ2VT2Q",n={active:a},r=tt+t+"/active_status",e.next=5,Ve(r,n,"7objfFTJUoAcHoLGJ2VT2Q");case 5:e.sent,this.setState({loading:!0}),this.reloadApiKeys();case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"serverTable",value:function(){return r.a.createElement(Me.a,{component:Fe.a},r.a.createElement(Ue.a,{size:"small","aria-label":"a dense table"},r.a.createElement(We.a,null,r.a.createElement(Le.a,null,r.a.createElement(Be.a,{align:"center"},"Name"),r.a.createElement(Be.a,{align:"center"},"Id"),r.a.createElement(Be.a,{align:"center"},"API key token"),r.a.createElement(Be.a,{align:"center"},"Active?"),r.a.createElement(Be.a,{align:"center"}))),r.a.createElement(Ne.a,null,this.state.api_keys.map(this.apiKeysDisplay,this))))}},{key:"addApiKey",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(t){var a;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"7objfFTJUoAcHoLGJ2VT2Q",a={name_from:t},tt+"add/",e.next=5,Xe("https://taller2airbnb-profile.herokuapp.com/apikey/add/",a,"7objfFTJUoAcHoLGJ2VT2Q");case 5:e.sent,this.setState({new_key_name:""}),this.setState({loading:!0}),this.reloadApiKeys();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createServerForm",value:function(){var e=this;return this.state.create?r.a.createElement("div",{align:"center",style:{marginTop:"2rem"}},r.a.createElement(Ee.a,{type:"button",variant:"contained",color:"primary",onClick:function(){return e.setState({create:!1})}},"Add server")):r.a.createElement("div",{align:"center",style:{marginTop:"2rem"}},"Name:",r.a.createElement("input",{style:{marginLeft:"2rem"},name:"new_key_name",type:"text",onChange:this.onInputchange,value:this.state.new_key_name}),r.a.createElement(Ee.a,{style:{marginLeft:"2rem"},disabled:""==this.state.new_key_name,type:"button",variant:"contained",color:"primary",onClick:this.onSubmitForm},"Create"))}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",null,"Loading..."):this.state.api_keys.length>0?r.a.createElement("div",null,this.serverTable(),this.createServerForm()):r.a.createElement("div",null,r.a.createElement("div",null,"Status: ",this.state.status),r.a.createElement("div",null,this.state.name),r.a.createElement("div",null,localStorage.getItem("token")))}}]),a}(r.a.Component),_t=Object(F.a)((function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"40px 16px"}}}))(wt),xt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(ge,{selectedRoute:"servers",header:"Servers"},r.a.createElement(_t,null))}}]),a}(n.Component);var St=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!0,status:null,allow:!1,covidParams:{},errorMessage:""},n.onInputchange=n.onInputchange.bind(Object(ye.a)(n)),n}return Object(c.a)(a,[{key:"onInputchange",value:function(e){this.updateParam([e.target.name],e.target.value),this.setState({allow:!this.validateForm()})}},{key:"updateParam",value:function(e,t){var a=this.state.covidParams;a[e]=t,this.setState({covidParams:a})}},{key:"validateForm",value:function(){var e,t=!0;for(var a in this.state.covidParams)"string"!=typeof(e=this.state.covidParams[a])||isNaN(e)||isNaN(parseFloat(e))||(t=!1);return t}},{key:"generatePutBody",value:function(){var e=this.state.covidParams;for(var t in e)e[t]=Number(e[t]);return e}},{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.reloadCovidParams();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadCovidParams",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){var t,a;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return et,e.next=3,qe("http://taller2airbnb-covidwarn.herokuapp.com/params/");case 3:if(t=e.sent,this.setState({status:t.status,loading:!1}),200!=t.status){e.next=10;break}return e.next=8,t.json();case 8:a=e.sent,this.setState({covidParams:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"paramsToList",value:function(e){var t={fatality_rate:"Fatality Rate",fatality_rate_variation:"Fatality Rate Variation",jump_days:"Jump Days",number_days_window_delta:"Number Days Window Delta",threshold_slope_variation:"Threshold Slope Variation",total_jumps:"Total Jumps"},a=[];for(var n in e)a=a.concat({name:n,display_name:t[n],value:e[n]});return a}},{key:"paramDisplay",value:function(e){return r.a.createElement(Le.a,null,r.a.createElement(Be.a,{style:{fontWeight:"bold"}},e.display_name),r.a.createElement(Be.a,{align:"center"},r.a.createElement("input",{name:e.name,type:"text",onChange:this.onInputchange,value:this.state.covidParams[e.name]})))}},{key:"setCovidParams",value:function(){var e=Object(Pe.a)(Ae.a.mark((function e(){var t;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.generatePutBody(),et,e.next=4,He("http://taller2airbnb-covidwarn.herokuapp.com/params/",t);case 4:e.sent,this.setState({loading:!0,allow:!1}),this.reloadCovidParams();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"paramTable",value:function(){return r.a.createElement(Me.a,{style:{width:600},component:Fe.a},r.a.createElement(Ue.a,{"aria-label":"a dense table"},r.a.createElement(We.a,null,r.a.createElement(Le.a,null,r.a.createElement(Be.a,{align:"center"},"Parameter"),r.a.createElement(Be.a,{align:"center"},"Value"))),r.a.createElement(Ne.a,null,this.paramsToList(this.state.covidParams).map(this.paramDisplay,this))))}},{key:"submitButton",value:function(){var e=this;return r.a.createElement("div",{align:"center",style:{marginTop:"2rem"}},r.a.createElement(Ee.a,{disabled:!this.state.allow,type:"button",variant:"contained",color:"primary",onClick:function(){return e.setCovidParams()}},"Set new values"))}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",null,"Loading..."):this.state.covidParams!={}?r.a.createElement("div",{align:"center"},this.paramTable(),this.submitButton()):r.a.createElement("div",null,r.a.createElement("div",null,"Status: ",this.state.status))}}]),a}(r.a.Component),Ct=Object(F.a)((function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"40px 16px"}}}))(St),Tt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(ge,{selectedRoute:"covid",header:"Covid Settings"},r.a.createElement(Ct,null))}}]),a}(n.Component),Rt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{key:"router"},r.a.createElement(p.b,{exact:!0,path:N.routes().login,render:function(e){return localStorage.getItem("token")?r.a.createElement(p.a,{to:{pathname:N.routes().home}}):r.a.createElement(pt,e)}}),r.a.createElement(p.b,{exact:!0,path:N.routes().healthcheck,component:yt}),r.a.createElement(Et,{exact:!0,path:N.routes().home,component:Ce}),r.a.createElement(Et,{exact:!0,path:N.routes().profile,component:De}),r.a.createElement(Et,{exact:!0,path:N.routes().transactions,component:rt}),r.a.createElement(Et,{exact:!0,path:N.routes().other,component:Te}),r.a.createElement(Et,{exact:!0,path:N.routes().userlist,component:bt}),r.a.createElement(Et,{exact:!0,path:N.routes().postings,component:Ot}),r.a.createElement(Et,{exact:!0,path:N.routes().servers,component:xt}),r.a.createElement(Et,{exact:!0,path:N.routes().covid,component:Tt}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Rt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e,t,a){},92:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"}},[[116,1,2]]]);
//# sourceMappingURL=main.4caa3edc.chunk.js.map